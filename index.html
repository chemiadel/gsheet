<!doctype html>
<html>
  <head>
    <title>onload test</title>
    // ES5
    <script>
      function load() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        fetch(
        `https://script.google.com/macros/s/AKfycbwlSib7xSzBtMbpBSJfztCp4g-EEQJuRU0l9sObhVAtxjIEa5eyEmeb5zrwwlJcFlJQwg/exec?tab=${
            params?.tab || ""
        }&id${params?.id || 1}`
        )
        .then((res) => res.json())
        .then((json) => {
            console.log("json", json);
            location.href = json.dest;
        })
        .catch(err=> console.log(err))
      }
      window.onload = load;
    </script>
  </head>
  <body>
    <p>The load event fires when the document has finished loading!</p>
  </body>
</html>